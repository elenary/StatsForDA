# Распределения {#distributions} 

```{r, eval=TRUE, echo = FALSE, message = FALSE}
library(tidyverse)
library(kableExtra)
teacher_number <- seq(1,30,1)
age <-  sample(22:60, size = 30, replace = T)
exp_years <- sample(1:8, size = 30, replace = T)
exp_scaled <- ifelse(exp_years >= 1 & exp_years <= 2, "от 1 до 2",
                     ifelse(exp_years > 2 & exp_years <= 5, "от 3 до 5",
                            ifelse(exp_years > 5, "больше 5", exp_years)))
burnout_MBI <- sample(19:70, size = 30, replace = T)
univer <-  rep(c("MSU", "HSE", "MSU", "RANEPA", "HSE", "RANEPA"),5)
burnout <- tibble(teacher_number, age, exp_years, exp_scaled, burnout_MBI, univer)
```

Что такое распределение? Мы постоянно употребляем это слово.

Говоря о распределениях, мы имеем в виду **закон распределения случайной величины** – соответствие между возможными значениями этой величины из области ее допустимых значений и: вероятностями этих значений -- для дискретной величины, либо плотностью вероятности -- для непрерывной величины.

## Виды распределений

Законы распределений вероятностей можно вывести совсем не для всех величин! Но так сложилось, что некоторые закономерности, распределения вероятностей мы можем описать формулами, как в физике: сила тяжести (сила, с которой Земля притягивает все теля) прямо пропорциональная массе объекта, взятая с коэффициентом ускорения свободного падения $F = m*g$. Мы это заметили относительно окружающего мира и вывели закон (не лично мы, а вообще представители планеты Земля). Точно так же и с распределниями: мы заметили, что вероятности распределения некоторых случайных величин подчиняются определенным законам, и записали их. Например, доказано, что непрерывные случайные величины, на которые действует множество случайных факторов (например, рост, вес и тд), распределяются в соответствии с **распределением Гаусса**, оно же -- **нормальное распределение**. Его формула:

$P(x) = \frac{e^{-(x - \mu)^{2}/(2\sigma^{2}) }} {\sigma\sqrt{2\pi}}$

```{r echo = T, eval = T}
plot(dnorm(1:1000, mean = 500, sd = 100))
```

```{r, echo=F, eval=F}
# dist_sample <- sample(1:1000, 1000, replace = T)

# normdist_sample <- dnorm(1:1000, 500, 100)
# as_tibble(normdist_sample) %>% 
#   ggplot(aes(x=1:1000, y = normdist_sample)) +
#   geom_density(aes(x=1:1000, y = normdist_sample)) +
#   theme_minimal()
```

Или, например, экспоненциальное распределение:

$P(x)= \lambda \times e^{-\lambda x}$

```{r}
plot(dexp(x = 1:100, rate = 0.1))
```
χ2-распределение:

$P(x)= \lambda \times e^{-\lambda x}$

```{r}
plot(dchisq(1:1000, df=100))
```


Или, например, биномиальное распределение:

$P(k | n, p) = \frac{n!}{k!(n-k)!} \times p^k \times (1-p)^{n-k} =  {n \choose k} \times p^k \times (1-p)^{n-k}$

```{r}
plot(dbinom(1:100, size=100, prob=0.5))
```
Посмотреть и ужаснуться можно тут http://www.math.wm.edu/~leemis/chart/UDR/UDR.html. Нам, к счастью, ничего из этого не понадобится.

Менее пугающая версия https://www.johndcook.com/blog/distribution_chart/#normal

На примере данных про выгорание:

```{r}
kable(burnout)
```


```{r}
burnout %>% 
  ggplot(aes(x=exp_years)) +
  geom_histogram(binwidth = 0.5) +
  theme_minimal()
```



```{r}
burnout %>% 
  ggplot(aes(x=age)) +
  geom_density() +
  theme_minimal()
```


## Функции распределения

Выше мы познакомились с плотностью вероятностью, зафиксируем все применимые к вероятности функции, которые бывают полезны:

* **функция плотности вероятности (probability density function)** для непрерывных СВ (например, рост, вес) и **функция вероятности (probability mass function)** для дискретных СВ (например, количество заболевших) -- самая простая базовая функция, часто обозначается буквой `d*`
* **функция накопленной вероятности / плотности вероятности (cumulative distribution function)** для непреревных СВ, часто обозначается буквой `p*`
* **квантильная функция (quantile function)**, она же обратная функция накопленной плотности распределения, об этом попозже, часто обозначается буквой `q*`
**Функция плотности вероятности (cumulative distribution function; cdf)**

Зачем они нужны?

Разберемся на примере тестов на IQ.

**Функция плотности вероятности (probability density function)**
```{r}
iq <- seq(50,150, 0.1)
plot(iq, dnorm(iq, mean = 100, sd = 15))
```

**Функция накопленной плотности  (cumulative distribution function; cdf)**

```{r}
plot(iq, pnorm(iq, mean = 100, sd = 15))
```



<!--chapter:end-->
